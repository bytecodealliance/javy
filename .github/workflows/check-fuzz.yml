# Smoke test to build fuzz targets.
# Deserves its own action given that it depends on nightly
# and there's currently no way to defined multiple toolchains through the 
# `rust-toolchain.toml` configuration file.
name: Build Fuzz Targets
  on:
    push:
      branches:
        - main
    pull_request:

jobs:
  check-fuzz:
    name: Build fuzz targets
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - name: Install nightly

        run: rustup install nightly-2024-07-07
      - name: Install cargo fuzz
        run: cargo install cargo-fuzz --version=0.12.0
      - name: Build fuzz targets
        run: cargo +nightly fuzz build --dev

